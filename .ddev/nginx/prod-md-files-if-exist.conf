# Serve .md files when Accept header contains text/plain or text/markdown
# Strip .html extension and replace with .md for markdown requests
if ($http_accept ~* "text/(plain|markdown)") {
  # Remove /index.html or .html and append .md
  rewrite ^(.+)/index\.html$ $1.md last;
  rewrite ^(.+)\.html$ $1.md last;
}
